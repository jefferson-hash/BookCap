<div class="chat-container">
  <div class="chat-list">
    <h3>Mis Chats</h3>
    <div *ngFor="let user of users">
      <p (click)="createChat(user.ID)" [ngClass]="{ selected: selectedUserId === user.ID }">
        {{ user.name }}
      </p>
    </div>
  </div>

  <div class="chat-window" *ngIf="selectedChatId; else noChatSelected">
    <div class="messages" #messagesContainer>
      <div
        *ngFor="let msg of messages"
        [ngClass]="{
          'message-bubble': true,
          me: msg.sender_ID === userId,
          other: msg.sender_ID !== userId
        }"
      >
        <span>{{ msg.content }}</span>
        <small>{{ msg.createdAt | date : 'shortTime' }}</small>
      </div>
    </div>

    <div class="input-box">
      <input
        [(ngModel)]="newMessage"
        (keyup.enter)="sendMessage()"
        placeholder="Escribe un mensaje..."
      />
      <button (click)="sendMessage()">Enviar</button>
    </div>
  </div>

  <ng-template #noChatSelected>
    <div class="no-chat">
      <p>ðŸ’¬ Selecciona un chat para comenzar a conversar</p>
    </div>
  </ng-template>
</div>
